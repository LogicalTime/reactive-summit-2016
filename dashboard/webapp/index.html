<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Dashboard</title>
    <link rel="stylesheet" href="css/base.css"/>
    <script src="//npmcdn.com/react@15.3.1/dist/react-with-addons.js"></script>
    <script src="//npmcdn.com/react-dom@15.3.1/dist/react-dom.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.24/browser.min.js"></script>
</head>
<body>
<h1>Dashboard</h1>
<div id="topHandleSummaries">Loading...</div>

<script type="text/babel">

class HandleSummaryItem extends React.Component {
  render() {
    const i = this.props.handleSummaryItem;
    const ws = i.windowSize ? i.windowSize / 1000 + " s" : "-";
    return (
      <li>
      <div>{ws}</div>
      <div className="description">{i.description}</div>
      </li>
    );
  }
}

class HandleSummary extends React.Component {
  render() {
    const items = this.props.handleSummary.items.map((handleSummaryItem, i) => {
      return <HandleSummaryItem handleSummaryItem={handleSummaryItem} key={i}/>;
    });
    return (
      <li>
        {this.props.handleSummary.handle}
        <ul className="handleSummaryItems">{items}</ul>
      </li>
    );
  }
}

class TopHandleSummaries extends React.Component {
  render() {
    const handleSummaries = this.props.topHandleSummaries.map((handleSummary) => {
      return <HandleSummary handleSummary={handleSummary} key={handleSummary.handle}/>
    });
    return <ul id="topHandleSummaries">{handleSummaries}</ul>;
  }
}

const app = function(evt) {
  const topHandleSummaries = JSON.parse(evt).topHandleSummaries;
  ReactDOM.render(
    <TopHandleSummaries topHandleSummaries={topHandleSummaries} />,
    document.getElementById('topHandleSummaries')
  );
};

var allHandles = new WebSocket("ws://" + window.location.host + "/dashboard");
allHandles.onmessage = function(evt) { app(evt.data); };

// app('{"topHandleSummaries":[{"handle":"@0","items":[{"windowSize":80740},{},{"windowSize":26355},{"description":"salad"},{"windowSize":14286,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@1","items":[{"windowSize":33706},{"windowSize":28099},{"windowSize":34527},{"windowSize":52140,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@10","items":[{"windowSize":26849},{"windowSize":58294},{"windowSize":16108},{"windowSize":17346,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@11","items":[{"windowSize":70103},{},{},{"windowSize":24014,"description":"with the famous Jamie Allen and salad"},{"description":"with the famous Jamie Allen"}]},{"handle":"@12","items":[{},{},{"windowSize":77187},{"windowSize":18713},{"windowSize":31133,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@13","items":[{"windowSize":37445},{},{"windowSize":17887},{"windowSize":22336},{"windowSize":32227,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@14","items":[{"windowSize":83453},{"windowSize":55631},{"windowSize":64322,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@15","items":[{"windowSize":233761,"description":"salad"},{"windowSize":3061,"description":"salad"},{"windowSize":15301,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@16","items":[{"windowSize":29741},{"windowSize":92784},{"description":"salad"},{"windowSize":16331,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@17","items":[{},{"windowSize":14822},{"windowSize":87092},{"description":"salad"},{"windowSize":512,"description":"with the famous Jamie Allen"},{"description":"with the famous Jamie Allen"}]},{"handle":"@18","items":[{"windowSize":27300},{},{"windowSize":102493},{"windowSize":74546,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@19","items":[{"windowSize":8200},{"windowSize":17848},{},{"windowSize":33622},{"windowSize":15842,"description":"with the famous Jamie Allen and salad"},{"description":"with the famous Jamie Allen"}]},{"handle":"@2","items":[{"windowSize":121128},{},{"windowSize":10737,"description":"with the famous Jamie Allen and salad"},{"description":"with the famous Jamie Allen"}]},{"handle":"@20","items":[{"windowSize":43637},{"windowSize":26071},{"windowSize":44221},{"windowSize":70466,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@21","items":[{"windowSize":15546},{"windowSize":39347},{"windowSize":16877},{"windowSize":52600,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@22","items":[{"windowSize":26542},{"windowSize":37708},{},{"windowSize":53677,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@23","items":[{"windowSize":78352},{"windowSize":64059},{"windowSize":1531,"description":"salad"},{"description":"salad"}]},{"handle":"@24","items":[{},{"windowSize":12249},{},{"windowSize":9280},{"description":"with the famous Jamie Allen"}]},{"handle":"@25","items":[{"windowSize":11788},{"windowSize":27076},{"windowSize":2069},{"windowSize":35632},{"windowSize":35751,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@26","items":[{"windowSize":144172},{"windowSize":4090,"description":"salad"},{"windowSize":40831,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@27","items":[{"windowSize":41193},{"windowSize":53657},{},{"windowSize":12753,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@28","items":[{"windowSize":21531},{"windowSize":4586},{"windowSize":26972},{"description":"salad"},{"windowSize":9709,"description":"salad"},{"windowSize":21432,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@29","items":[{},{"windowSize":1021},{},{"windowSize":37687},{"windowSize":45926,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@3","items":[{"windowSize":191106},{"windowSize":11323,"description":"salad"},{"description":"salad"},{"windowSize":3577,"description":"salad"}]},{"handle":"@30","items":[{"windowSize":65533},{"windowSize":52541},{"windowSize":9179,"description":"with the famous Jamie Allen and salad"},{"windowSize":2545,"description":"salad"}]},{"handle":"@31","items":[{},{"windowSize":106317},{"windowSize":30110,"description":"salad"},{"windowSize":36221,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@32","items":[{"windowSize":63259},{"windowSize":29143},{"windowSize":42109},{"windowSize":33688,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@33","items":[{},{},{"windowSize":22497},{"windowSize":47713},{"description":"with the famous Jamie Allen"},{"description":"salad"}]},{"handle":"@34","items":[{"windowSize":30818},{"windowSize":116036},{"windowSize":3567,"description":"salad"},{"windowSize":63808,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@35","items":[{"windowSize":36056},{"windowSize":103218},{"windowSize":2548},{"windowSize":2566,"description":"salad"},{"windowSize":10205,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@36","items":[{"windowSize":44235},{"windowSize":17381},{},{"windowSize":46440,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@37","items":[{"windowSize":65573},{},{"windowSize":16364},{},{"description":"with the famous Jamie Allen"},{"windowSize":3055,"description":"salad"}]},{"handle":"@38","items":[{"windowSize":11275},{},{},{"description":"with the famous Jamie Allen"},{"windowSize":59201,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@39","items":[{"windowSize":46362},{"windowSize":74097},{"windowSize":50104,"description":"with the famous Jamie Allen and salad"},{"description":"salad"}]},{"handle":"@4","items":[{"windowSize":21714},{"windowSize":18373},{"windowSize":5124},{},{"windowSize":20932,"description":"salad"}]},{"handle":"@40","items":[{"windowSize":71323},{"windowSize":8200},{"windowSize":40049},{"windowSize":12275,"description":"with the famous Jamie Allen and salad"},{"description":"salad"}]},{"handle":"@41","items":[{"windowSize":43070},{},{"windowSize":86105},{"windowSize":57180,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@42","items":[{},{"windowSize":19428},{"windowSize":11250},{"windowSize":5711},{"windowSize":35216,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@43","items":[{"windowSize":67948},{"windowSize":24040},{"windowSize":12340},{"description":"with the famous Jamie Allen"}]},{"handle":"@44","items":[{"windowSize":24096},{"windowSize":59249},{"windowSize":31343,"description":"with the famous Jamie Allen and salad"},{"description":"salad"}]},{"handle":"@45","items":[{},{},{"windowSize":127144},{"windowSize":65854,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@46","items":[{"windowSize":166607},{"windowSize":5107,"description":"with the famous Jamie Allen"}]},{"handle":"@47","items":[{"windowSize":85632},{"windowSize":86683,"description":"with the famous Jamie Allen"},{"description":"with the famous Jamie Allen"}]},{"handle":"@48","items":[{"windowSize":68670},{"windowSize":51049},{"description":"salad"}]},{"handle":"@49","items":[{"windowSize":26561},{"windowSize":27601},{"windowSize":19025},{"windowSize":13307,"description":"salad"},{"windowSize":26019,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@5","items":[{"windowSize":58971},{"windowSize":9699},{"windowSize":36732},{"windowSize":23018,"description":"with the famous Jamie Allen and salad"},{"description":"with the famous Jamie Allen"}]},{"handle":"@50","items":[{"windowSize":11268},{},{"windowSize":44972},{"windowSize":15628},{"windowSize":6644,"description":"with the famous Jamie Allen"},{"windowSize":506,"description":"with the famous Jamie Allen"}]},{"handle":"@51","items":[{"windowSize":46117},{"windowSize":21441},{"windowSize":10225},{},{"windowSize":38277,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@52","items":[{"windowSize":163342},{"windowSize":16364,"description":"with the famous Jamie Allen and salad"},{"windowSize":6629,"description":"with the famous Jamie Allen"}]},{"handle":"@53","items":[{"windowSize":47353},{"windowSize":27565},{},{},{},{"windowSize":17862,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@54","items":[{"windowSize":43607},{},{"windowSize":97390},{"windowSize":16366,"description":"salad"},{"windowSize":2553,"description":"salad"}]},{"handle":"@55","items":[{"windowSize":47709},{},{"windowSize":33897},{"description":"salad"},{"windowSize":31130,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@56","items":[{"windowSize":4616},{"windowSize":25541},{"windowSize":34749},{},{"windowSize":25552,"description":"salad"},{"windowSize":12246,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@57","items":[{"windowSize":21129},{"windowSize":45445},{"windowSize":12782},{},{"description":"salad"},{"windowSize":14792,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@58","items":[{},{"windowSize":46526},{"windowSize":54697},{},{"windowSize":41890,"description":"with the famous Jamie Allen and salad"},{"description":"with the famous Jamie Allen"}]},{"handle":"@59","items":[{"windowSize":31317},{"windowSize":2033},{"windowSize":20970},{"windowSize":8696},{"windowSize":68914,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@6","items":[{},{"windowSize":37804},{"windowSize":81982},{"windowSize":18879,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@60","items":[{"windowSize":133091},{},{"windowSize":56176,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@61","items":[{"windowSize":11324},{"windowSize":13284},{},{"windowSize":42344,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@62","items":[{"windowSize":10284},{"windowSize":32161},{"windowSize":7162},{"windowSize":20843},{"windowSize":31197,"description":"with the famous Jamie Allen and salad"},{"windowSize":11219,"description":"salad"}]},{"handle":"@63","items":[{"windowSize":95279},{},{"windowSize":17171},{"windowSize":10755,"description":"with the famous Jamie Allen"},{"windowSize":20411,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@64","items":[{"windowSize":28894},{"windowSize":30119},{"windowSize":62772},{"description":"with the famous Jamie Allen"},{"windowSize":8687,"description":"with the famous Jamie Allen and salad"},{"description":"salad"}]},{"handle":"@65","items":[{"windowSize":10988},{"windowSize":34706},{},{},{"description":"salad"}]},{"handle":"@66","items":[{"windowSize":49851},{"windowSize":54172},{"windowSize":8163,"description":"with the famous Jamie Allen and salad"},{"description":"salad"}]},{"handle":"@67","items":[{"windowSize":24121},{"windowSize":39043},{"windowSize":59727,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@68","items":[{},{"windowSize":124385},{"description":"with the famous Jamie Allen"},{"windowSize":9185,"description":"with the famous Jamie Allen"}]},{"handle":"@69","items":[{},{"windowSize":16390},{"windowSize":59262},{"windowSize":29986},{"windowSize":4605,"description":"salad"},{"windowSize":16832,"description":"salad"}]},{"handle":"@7","items":[{"windowSize":73592},{"windowSize":33750},{"windowSize":68400,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@70","items":[{},{"windowSize":122550},{},{"windowSize":45990,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@71","items":[{"windowSize":6769},{"windowSize":129211},{"windowSize":41825,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@72","items":[{},{"windowSize":86390},{"description":"salad"},{"windowSize":24504,"description":"salad"}]},{"handle":"@73","items":[{"windowSize":57383},{},{"windowSize":12274},{"windowSize":9186},{"windowSize":54099,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@74","items":[{"windowSize":73197},{"windowSize":53183},{},{"description":"salad"},{"windowSize":9683,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@75","items":[{},{"windowSize":83821},{},{"description":"salad"},{"description":"with the famous Jamie Allen"}]},{"handle":"@76","items":[{"windowSize":44808},{"windowSize":13805},{"windowSize":24440},{"windowSize":61306,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@77","items":[{"windowSize":194536},{"description":"salad"}]},{"handle":"@78","items":[{"windowSize":99905},{"windowSize":42855},{"windowSize":8687,"description":"salad"}]},{"handle":"@79","items":[{"windowSize":3636},{},{"windowSize":22997},{"windowSize":8725},{"windowSize":3670},{"windowSize":44404,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@8","items":[{"windowSize":47777},{"windowSize":3053},{"windowSize":9200},{"windowSize":35452},{"windowSize":46973,"description":"salad"}]},{"handle":"@80","items":[{"windowSize":21636},{},{"windowSize":25210},{"description":"with the famous Jamie Allen"},{"windowSize":2032,"description":"salad"}]},{"handle":"@81","items":[{"windowSize":28727},{},{"windowSize":117443,"description":"with the famous Jamie Allen"},{"windowSize":71986,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@82","items":[{},{},{},{"windowSize":21964},{"windowSize":21864},{"description":"with the famous Jamie Allen"},{"description":"with the famous Jamie Allen"},{"windowSize":15810,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@83","items":[{"windowSize":13056},{"windowSize":8703},{"windowSize":15827},{"windowSize":53862},{"windowSize":22971,"description":"salad"}]},{"handle":"@84","items":[{"windowSize":10292},{"windowSize":13259},{"windowSize":26601},{"description":"with the famous Jamie Allen"},{"windowSize":8679,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@85","items":[{},{"windowSize":84832},{},{"windowSize":18500,"description":"with the famous Jamie Allen"},{"windowSize":59735,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@86","items":[{"windowSize":80299},{},{"windowSize":51383},{"windowSize":55158,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@87","items":[{"windowSize":32904},{"windowSize":57748},{"windowSize":38786,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@88","items":[{"windowSize":3582},{"windowSize":127677},{"windowSize":18398,"description":"with the famous Jamie Allen and salad"},{"windowSize":5613,"description":"with the famous Jamie Allen"}]},{"handle":"@89","items":[{"windowSize":86676},{},{"windowSize":48237},{"windowSize":78137,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@9","items":[{"windowSize":29364},{"windowSize":35240},{"windowSize":24534},{"windowSize":31366},{"windowSize":11214,"description":"salad"}]},{"handle":"@90","items":[{"windowSize":39183},{"windowSize":160745},{"windowSize":4108,"description":"with the famous Jamie Allen and salad"},{"windowSize":25518,"description":"with the famous Jamie Allen"}]},{"handle":"@91","items":[{"windowSize":49307},{"windowSize":139805},{"description":"salad"}]},{"handle":"@92","items":[{"windowSize":510},{"windowSize":134473},{},{"description":"salad"}]},{"handle":"@93","items":[{"windowSize":24151},{"windowSize":76624},{"windowSize":12673},{"windowSize":62805,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@94","items":[{"windowSize":42052},{"windowSize":144420,"description":"with the famous Jamie Allen"},{"windowSize":44912,"description":"salad"}]},{"handle":"@95","items":[{"windowSize":65083},{},{},{},{"description":"salad"}]},{"handle":"@96","items":[{"windowSize":25661},{"windowSize":21471},{"windowSize":54868},{"windowSize":41371,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@97","items":[{"windowSize":25856},{},{"windowSize":1021},{},{"windowSize":36257,"description":"with the famous Jamie Allen and salad"},{"description":"salad"}]},{"handle":"@98","items":[{"windowSize":532},{},{"windowSize":83999},{"windowSize":44425,"description":"with the famous Jamie Allen and salad"}]},{"handle":"@99","items":[{},{},{},{"windowSize":82475},{"windowSize":14834,"description":"with the famous Jamie Allen and salad"},{"windowSize":4079,"description":"with the famous Jamie Allen and salad"}]}]}');
</script>
</body>
</html>
